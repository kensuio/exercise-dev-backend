java.lang.UnsupportedOperationException: Position.start on NoPosition
occurred in the presentation compiler.

action parameters:
uri: file://<WORKSPACE>/src/main/scala/forex/Main.scala
text:
package forex

import akka.actor.ActorSystem
import akka.http.scaladsl.server.Route
import forex.config._
import forex.interfaces.api.Api
import forex.interfaces.api.rates.RatesApi
import forex.main.HttpServer
import forex.rates.Rates
import forex.services.oneforge.OneForge
import zio.config._
import zio.config.syntax._
import zio.config.typesafe.TypesafeConfigSource
import zio.logging.backend.SLF4J
import zio.{ULayer, ZIOAppDefault, _}
import forex.rates.RatesCache

object Main extends ZIOAppDefault {

  override def run =
    ZIO.scoped((HttpServer.start) *> ZIO.never)
      .provide(prepareEnvironment)

  private def prepareEnvironment: RLayer[Any, HttpServer] = {

    /* Read configuration and builds the typed object */
    val configLayer =
      ZLayer.fromZIO(read(ApplicationConfig.descriptor.from(TypesafeConfigSource.fromResourcePath))
        .mapBoth(
          err => new RuntimeException(s"Failed to load configuration: $err"),
          identity
        ))

    /* Spawn the actor system, requires a system clock to define timeouts */
    val actorSystemLayer: RLayer[Any, ActorSystem] = {
      val akkaStart = (cfg: AkkaConfig) => ZIO.attempt(ActorSystem(cfg.name))
      val akkaStop  = (sys: ActorSystem, cfg: AkkaConfig) =>
        ZIO.fromFuture(_ => sys.terminate())
          .timeout(cfg.exitJvmTimeout)
          .orDie

      val akkaConfigLayer = configLayer.narrow(_.akka) >>> ZLayer.fromZIO(getConfig[AkkaConfig])

      akkaConfigLayer >>>
        ZLayer.scoped {
          ZIO.service[AkkaConfig].flatMap(config =>
            ZIO.acquireRelease(acquire = akkaStart(config))(release = akkaStop(_, config))
          )
        }
    }

    /* Enriched Logging */
    val loggingLayer: ULayer[Unit] =
      zio.Runtime.removeDefaultLoggers ++ SLF4J.slf4j

    /* Build the routes to serve, based on defined services */
    val routesLayer: Layer[RuntimeException, Route] = {
      // Here we need something more that a dummy
      val oneForgeLayer     = OneForge.live
      val optimizationsConfigLayer = configLayer.narrow(_.optimizations) >>> ZLayer.fromZIO(getConfig[OptimizationsConfig])

      val ratesCacheLayer   = ZLayer.fromZIO(
        for 
      )
      val ratesService = (oneForgeLayer ++ optimizationsConfigLayer) >>> Rates.oneForge
      val apiLayer     = ratesService >>> RatesApi.live >>> Api.live

      /* extract routes from the complete API */
      apiLayer >>> ZLayer(ZIO.serviceWith[Api](_.routes))
    }

    /* combine the required layers to start the server */
    (actorSystemLayer ++ configLayer.narrow(_.api) ++ routesLayer ++ loggingLayer) >>> HttpServer.live

  }
}



error stacktrace:
scala.reflect.internal.util.Position.fail(Position.scala:24)
	scala.reflect.internal.util.UndefinedPosition.start(Position.scala:101)
	scala.reflect.internal.util.UndefinedPosition.start(Position.scala:97)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$4(PcCollector.scala:351)
	scala.collection.immutable.List.flatMap(List.scala:293)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:350)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$5(PcCollector.scala:363)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:363)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$3(PcCollector.scala:342)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:342)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$19(PcCollector.scala:469)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:469)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$3(PcCollector.scala:342)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:342)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$19(PcCollector.scala:469)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:469)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$3(PcCollector.scala:342)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:342)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$19(PcCollector.scala:469)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:469)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$3(PcCollector.scala:342)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:342)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$1(PcCollector.scala:288)
	scala.meta.internal.pc.PcCollector.$anonfun$traverseSought$3(PcCollector.scala:342)
	scala.collection.LinearSeqOps.foldLeft(LinearSeq.scala:183)
	scala.collection.LinearSeqOps.foldLeft$(LinearSeq.scala:179)
	scala.collection.immutable.List.foldLeft(List.scala:79)
	scala.meta.internal.pc.PcCollector.traverseWithParent$1(PcCollector.scala:342)
	scala.meta.internal.pc.PcCollector.traverseSought(PcCollector.scala:472)
	scala.meta.internal.pc.PcCollector.resultAllOccurences(PcCollector.scala:276)
	scala.meta.internal.pc.PcCollector.result(PcCollector.scala:208)
	scala.meta.internal.pc.PcSemanticTokensProvider.provide(PcSemanticTokensProvider.scala:71)
	scala.meta.internal.pc.ScalaPresentationCompiler.$anonfun$semanticTokens$1(ScalaPresentationCompiler.scala:151)
